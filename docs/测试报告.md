# 图片管理系统测试报告

## 1. 测试概述

### 1.1 测试目的
验证图片管理系统各项功能的正确性、稳定性和用户体验。

### 1.2 测试范围
- 用户认证功能
- 图片上传功能
- 图片列表查看和筛选
- 图片详情查看和编辑
- 图片删除功能
- 标签管理功能
- 从其他账户导入图片功能
- AI对话式搜索功能
- 轮播组功能
- 路由缓存和数据刷新机制

### 1.3 测试环境
- **操作系统**: [Windows11/amd64]
- **浏览器**: [Edge]
- **后端版本**: Go [1.22.1]
- **前端版本**: npm [10.7.0]
- **数据库**: MySQL [8.4.0]
- **测试时间**: [2025/12/13]

---

## 2. 功能测试

### 2.1 用户认证功能

#### 2.1.1 用户注册
**测试步骤：**
1. 访问注册页面
2. 输入用户名（至少6个字符）
3. 输入有效的邮箱地址
4. 输入密码（至少6个字符）
5. 点击注册按钮

**预期结果：**
- 注册成功，自动跳转到图片列表页面
- 显示注册的用户名

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 注册页面: `screenshots/2.1.1-register-page.png`
- 注册成功: `screenshots/2.1.1-register-success.png`

**备注：** 
- 邮箱满足邮箱的格式即可，没有真正验证

---

#### 2.1.2 用户登录
**测试步骤：**
1. 访问登录页面
2. 输入已注册的用户名或邮箱
3. 输入正确的密码
4. 点击登录按钮

**预期结果：**
- 登录成功，跳转到图片列表页面
- 显示登录的用户名

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 登录页面: `screenshots/2.1.2-login-page.png`
- 登录成功: `screenshots/2.1.2-login-success.png`

**备注：** 
- 无

---

#### 2.1.3 登录失败（错误密码）
**测试步骤：**
1. 访问登录页面
2. 输入正确的用户名
3. 输入错误的密码
4. 点击登录按钮

**预期结果：**
- 显示错误提示信息
- 停留在登录页面

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 错误提示: `screenshots/2.1.3-login-error.png`

**备注：** 
- 无

---

#### 2.1.4 用户退出
**测试步骤：**
1. 登录系统
2. 点击右上角"退出"按钮

**预期结果：**
- 退出成功，跳转到登录页面
- 需要重新登录才能访问

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 退出后: `screenshots/2.1.4-logout-success.png`

**备注：** 
- 无

---

### 2.2 图片上传功能

#### 2.2.1 基本图片上传
**测试步骤：**
1. 登录系统
2. 点击导航栏"上传"按钮
3. 选择一张图片文件（JPEG/PNG/GIF/BMP/TIFF/WebP）
4. 输入标签（用逗号分隔）
5. 点击"上传"按钮

**预期结果：**
- 上传成功，显示"上传成功"提示
- 图片出现在图片列表中

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 上传页面: `screenshots/2.2.1-upload-page.png`
- 上传成功提示: `screenshots/2.2.1-upload-success.png`
- 上传后的列表: `screenshots/2.2.1-upload-list.png`

**备注：** 
- 标签隐式支持一些其他分隔符，如分号，顿号

---

#### 2.2.2 上传时启用AI标签生成
**测试步骤：**
1. 登录系统
2. 进入上传页面
3. 确保"使用AI自动生成标签"选项已勾选
4. 选择一张图片文件
5. 不输入任何标签
6. 点击"上传"按钮

**预期结果：**
- 上传成功
- 图片被自动添加了AI生成的标签

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 上传页面（AI启用）: `screenshots/2.2.2-upload-ai-enabled.png`
- 上传后的图片详情（查看标签）: `screenshots/2.2.2-upload-ai-tags.png`

**备注：** 
- 用户也可以自行输入标签，和ai生成的不冲突

---

#### 2.2.3 上传大文件（超过限制）
**测试步骤：**
1. 登录系统
2. 进入上传页面
3. 选择一个超过10MB的图片文件，由py脚本生成
4. 点击"上传"按钮

**预期结果：**
- 上传失败

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 错误提示: `screenshots/2.2.4-upload-file-too-large.png`

**备注：** 
- 无

---

### 2.3 图片列表查看和筛选

#### 2.3.1 查看图片列表
**测试步骤：**
1. 登录系统
2. 进入图片列表页面

**预期结果：**
- 显示所有图片的缩略图
- 显示图片名称、创建时间、标签等信息
- 显示图片总数

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 图片列表页面: `screenshots/2.3.1-image-list.png`

**备注：** 
- 无

---

#### 2.3.2 关键词搜索
**测试步骤：**
1. 在图片列表页面的关键词输入框输入图片文件名的一部分
2. 点击"查询"按钮

**预期结果：**
- 只显示文件名包含关键词的图片

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 搜索结果: `screenshots/2.3.2-keyword-search.png`

**备注：** 
- 无

---

#### 2.3.3 标签筛选（OR模式）
**测试步骤：**
1. 点击"展开筛选"
2. 在标签输入框输入多个标签（逗号分隔）
3. 确保标签模式为OR（默认）
4. 点击"查询"按钮

**预期结果：**
- 显示包含任意一个标签的图片

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 标签筛选结果（OR）: `screenshots/2.3.3-tag-filter-or.png`

**备注：** 
- 无

---

#### 2.3.4 标签筛选（AND模式）
**测试步骤：**
1. 点击"展开筛选"
2. 在标签输入框输入多个标签（逗号分隔）
3. 点击标签输入框旁的"OR"按钮切换到"AND"模式
4. 点击"查询"按钮

**预期结果：**
- 只显示同时包含所有标签的图片

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 标签筛选结果（AND）: `screenshots/2.3.4-tag-filter-and.png`

**备注：** 
- 无

---

#### 2.3.5 文件大小筛选（支持小数）
**测试步骤：**
1. 点击"展开筛选"
2. 在"文件大小最小"输入框输入小数（如0.03）
3. 在"文件大小最大"输入框输入另一个小数（如0.07）
4. 点击"查询"按钮

**预期结果：**
- 只显示文件大小在0.03MB到0.07MB之间的图片

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 文件大小筛选: `screenshots/2.3.5-size-filter.png`

**备注：** 
- 这两张图比较小

---

#### 2.3.6 筛选条件重置
**测试步骤：**
1. 设置多个筛选条件
2. 点击"重置"按钮

**预期结果：**
- 所有筛选条件被清空

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 重置后: `screenshots/2.3.6-filter-reset.png`

**备注：** 
- 无

---

#### 2.3.7 筛选条件持久化
**测试步骤：**
1. 设置筛选条件并查询
2. 点击一张图片进入详情页
3. 点击"退出"返回图片列表

**预期结果：**
- 筛选条件被保留
- 显示筛选后的结果

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 返回后的列表: `screenshots/2.3.7-filter-persist.png`

**备注：** 
- 无

---

### 2.4 图片详情查看和编辑

#### 2.4.1 查看图片详情
**测试步骤：**
1. 在图片列表中点击一张图片

**预期结果：**
- 显示图片的完整信息
- 显示图片的原始图片
- 显示图片的所有标签
- 显示EXIF信息（如果有）

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 图片详情页: `screenshots/2.4.1-image-detail.png`

**备注：** 
- 拍照的照片exif信息多一点，包括相机，拍摄时间等

---

#### 2.4.2 图片裁剪和调整
**测试步骤：**
1. 进入图片详情页
2. 点击"裁剪"按钮
3. 选择裁剪区域
4. 点击"保存"按钮

**预期结果：**
- 生成裁剪后的新图片
- 跳转到新图片的详情页

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 裁剪界面: `screenshots/2.4.2-crop-interface.png`
- 裁剪后的图片: `screenshots/2.4.2-crop-result.png`

**备注：** 
- 无

---

#### 2.4.3 添加标签
**测试步骤：**
1. 进入图片详情页
2. 在"添加标签"输入框输入标签名称
3. 点击"添加"按钮

**预期结果：**
- 标签被添加到图片
- 如果标签不存在，自动创建

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 添加标签后: `screenshots/2.4.4-add-tag.png`

**备注：** 
- 无

---

#### 2.4.4 编辑标签
**测试步骤：**
1. 进入图片详情页
2. 点击标签旁的"编辑"按钮
3. 修改标签名称
4. 点击"保存"按钮

**预期结果：**
- 标签名称被更新
- 如果新标签不存在，使用旧标签的颜色创建新标签

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 编辑标签: `screenshots/2.4.5-edit-tag.png`

**备注：** 
- 无

---

#### 2.4.5 删除标签
**测试步骤：**
1. 进入图片详情页
2. 点击标签旁的"删除"按钮
3. 确认删除

**预期结果：**
- 标签从图片中移除
- 标签本身不被删除（只是移除关联）

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 删除标签后: `screenshots/2.4.6-delete-tag.png`

**备注：** 
- 无

---

### 2.5 图片删除功能

#### 2.5.1 删除图片
**测试步骤：**
1. 进入图片详情页
2. 点击"删除"按钮
3. 确认删除

**预期结果：**
- 图片被删除
- 跳转到图片列表页面
- 图片不再出现在列表中

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 删除确认: `screenshots/2.5.1-delete-confirm.png`
- 删除后的列表: `screenshots/2.5.1-delete-result.png`

**备注：** 
- 无

---

#### 2.5.2 删除轮播组中的图片
**测试步骤：**
1. 将一张图片添加到轮播组
2. 进入该图片的详情页
3. 点击"删除"按钮
4. 确认删除
5. 进入轮播组页面

**预期结果：**
- 图片被删除
- 图片自动从轮播组中移除
- 轮播组中不再显示该图片

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 删除前轮播组: `screenshots/2.5.2-slideshow-before.png`
- 删除后轮播组: `screenshots/2.5.2-slideshow-after.png`

**备注：** 
- 无

---

### 2.6 标签管理功能

#### 2.6.1 查看标签列表
**测试步骤：**
1. 点击导航栏"标签"按钮

**预期结果：**
- 显示所有标签
- 显示标签名称和颜色

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 标签列表: `screenshots/2.6.1-tag-list.png`

**备注：** 
- 标签按字典序排列

---

#### 2.6.2 创建标签
**测试步骤：**
1. 进入标签管理页面
2. 输入标签名称
3. 选择标签颜色
4. 点击"创建"按钮

**预期结果：**
- 标签被创建
- 出现在标签列表中

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 创建标签: `screenshots/2.6.2-create-tag.png`

**备注：** 
- 无

---

#### 2.6.3 编辑标签颜色
**测试步骤：**
1. 进入标签管理页面
2. 点击标签的"编辑颜色"按钮
3. 选择新颜色
4. 点击"保存"按钮

**预期结果：**
- 标签颜色被更新
- 标签按钮右对齐显示

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 编辑颜色: `screenshots/2.6.3-edit-color.png`

**备注：** 
- 无

---

#### 2.6.4 删除标签
**测试步骤：**
1. 进入标签管理页面
2. 点击标签的"删除"按钮
3. 确认删除

**预期结果：**
- 标签被删除
- 标签从所有图片中移除（但图片本身不受影响）

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 删除标签: `screenshots/2.6.4-delete-tag.png`

**备注：** 
- 无

---

### 2.7 从其他账户导入图片功能

#### 2.7.1 验证账户
**测试步骤：**
1. 登录系统A
2. 进入上传页面
3. 切换到"从其他账户导入"标签
4. 输入另一个账户（系统B）的用户名和密码
5. 点击"验证并查看图片"按钮

**预期结果：**
- 验证成功
- 显示系统B的所有图片缩略图
- 所有图片默认被选中（圆圈显示✓）

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 导入页面: `screenshots/2.7.1-import-page.png`
- 验证成功: `screenshots/2.7.1-import-verify-success.png`

**备注：** 
- 无

---

#### 2.7.2 导入图片
**测试步骤：**
1. 验证账户后，选择要导入的图片
2. 点击"导入选中图片"按钮

**预期结果：**
- 导入成功
- 显示成功消息
- 导入的图片出现在系统A的图片列表中
- 导入的图片保留原有标签（标签颜色也保留）
- 导入的图片保留EXIF信息
- 导入的图片有新的创建时间

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 导入后的列表: `screenshots/2.7.3-import-result.png`
- 导入图片的详情（查看标签和EXIF）: `screenshots/2.7.3-imported-image-detail.png`

**备注：** 
- 无

---

### 2.8 AI对话式搜索功能

#### 2.8.1 自然语言查询
**测试步骤：**
1. 点击导航栏"AI搜索"按钮
2. 输入自然语言查询（如"查找所有风景图片"）
3. 点击"搜索"按钮

**预期结果：**
- AI解析查询并生成筛选条件
- 显示符合条件的图片列表

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 搜索结果: `screenshots/2.8.1-ai-search-result.png`

**备注：** 
- 无

---

#### 2.8.2 AI搜索结果跳转到图片列表
**测试步骤：**
1. 进行AI搜索
2. 搜索结果页面出现后，点击"前往图片列表"按钮

**预期结果：**
- 跳转到图片列表页面
- 应用AI生成的筛选条件
- 显示筛选后的图片

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 跳转后的列表: `screenshots/2.8.2-ai-to-list.png`

**备注：** 
- 无

---

### 2.9 轮播组功能

#### 2.9.1 添加图片到轮播组
**测试步骤：**
1. 在图片列表中，点击图片缩略图上的"+"按钮

**预期结果：**
- 图片被添加到轮播组
- 按钮变为"✓"表示已添加

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 添加轮播: `screenshots/2.9.1-add-slideshow.png`

**备注：** 
- 允许缓存其他账户的图片到轮播组

---

#### 2.9.2 从轮播组移除图片
**测试步骤：**
1. 点击已添加到轮播组的图片上的"✓"按钮

**预期结果：**
- 图片从轮播组中移除
- 按钮变为"+"表示未添加

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 移除轮播: `screenshots/2.9.2-remove-slideshow.png`

**备注：** 
- 无

---

#### 2.9.3 查看轮播
**测试步骤：**
1. 添加多张图片到轮播组
2. 点击导航栏"轮播"按钮

**预期结果：**
- 进入轮播页面
- 自动播放图片
- 可以暂停/继续播放
- 可以切换上一张/下一张

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 轮播页面: `screenshots/2.9.3-slideshow-view.png`

**备注：**
- 无

---

#### 2.9.4 编辑轮播设置
**测试步骤：**
1. 进入轮播编辑页面
2. 调整图片的播放时长
3. 调整图片顺序
4. 保存设置

**预期结果：**
- 设置被保存
- 轮播按照新的设置播放

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 编辑轮播: `screenshots/2.9.4-edit-slideshow.png`

**备注：** 
- 无

---

## 3. 性能测试

### 3.1 大量图片加载性能
**测试步骤：**
1. 上传或导入大量图片（如100张以上）
2. 进入图片列表页面
3. 观察加载时间

**预期结果：**
- 页面加载时间在可接受范围内（<3秒）
- 图片缩略图正常显示

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 大量图片列表: `screenshots/3.1-large-list.png`

**备注：** 
- 无

---

### 3.2 大文件上传性能
**测试步骤：**
1. 上传一个大图片
2. 观察上传时间

**预期结果：**
- 上传时间合理
- 上传过程中有加载提示

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 大文件上传: `screenshots/3.2-large-upload.png`

**备注：**
- 图片本身是几乎黑色的

---

## 4. 兼容性测试

### 4.1 浏览器兼容性
**测试浏览器：**
- [ ] Chrome [版本: _____]
- [ ] Firefox [版本: _____]
- [ ] Safari [版本: _____]
- [ ] Edge [版本: _____]

**测试结果：** ________________________

**截图位置：** `screenshots/4.1-browser-compatibility/`

---

### 4.2 移动端适配
**测试设备：**
- [ ] 手机 [型号: _____]
- [ ] 平板 [型号: _____]

**测试结果：** ________________________

**截图位置：** `screenshots/4.2-mobile/`

---

## 5. 安全性测试

### 5.1 未登录访问保护
**测试步骤：**
1. 退出登录
2. 直接访问需要登录的页面URL（如 /images）

**预期结果：**
- 自动跳转到登录页面
- 无法访问受保护的内容

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 未登录访问: `screenshots/5.1-unauthorized-access.png`

**备注：**
- 无

---

### 5.2 跨账户数据隔离
**测试步骤：**
1. 使用账户A登录
2. 尝试访问账户B的图片（通过修改URL中的图片ID）

**预期结果：**
- 无法访问其他用户的图片
- 返回404或权限错误

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 跨账户访问: `screenshots/5.2-cross-account-access.png`

**备注：**
- 无

---

## 6. 异常测试

---

### 6.1 无效文件格式
**测试步骤：**
1. 尝试上传非图片文件（如.txt文件）

**预期结果：**
- 无法选择非图片文件

**实际结果：** [✅] 通过 [ ] 失败

**截图位置：**
- 无效格式: `screenshots/6.2-invalid-format.png`

**备注：**
- 包括拖拽和从文件资源管理器选

---

## 7. 测试总结

### 7.1 测试统计
- **总测试用例数**: 40
  - 功能测试（2.1-2.9）: 33个
  - 性能测试（3.1-3.2）: 2个
  - 兼容性测试（4.1-4.2）: 2个
  - 安全性测试（5.1-5.2）: 2个
  - 异常测试（6.1）: 1个

---

## 8. 附录

### 8.1 测试数据
- **测试账号列表**: 
  - 账号1: user222 / 123456
  - 账号2: user333 / 123456
  - ...

---

**报告版本**: v1.0  
**最后更新**: [2025/12/23]

